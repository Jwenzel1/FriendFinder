<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Friend Finder</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1>Survey Questions</h1>

          <hr>

          <h2>About You</h2>
          <p>Name (Required)</p>
          <input id = "name" type="text" name="name">
          <p>Link to Photo Image (Required)</p>
          <input id = "photo" type="text" name="photoLink">
          <hr>

          <h2>Question 1</h2>
          <p>Your mind is always buzzing with unexplored ideas and plans</p>
          <select id="question1">
            <option selected disabled>Choose 1 - 5</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h2>Question 2</h2>
          <p>Your mind is always buzzing with unexplored ideas and plans</p>
          <select id="question2">
            <option selected disabled>Choose 1 - 5</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h2>Question 3</h2>
          <p>Your mind is always buzzing with unexplored ideas and plans</p>
          <select id="question3">
            <option selected disabled>Choose 1 - 5</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h2>Question 4</h2>
          <p>Your mind is always buzzing with unexplored ideas and plans</p>
          <select id="question4">
            <option selected disabled>Choose 1 - 5</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h2>Question 5</h2>
          <p>Your mind is always buzzing with unexplored ideas and plans</p>
          <select id="question5">
            <option selected disabled>Choose 1 - 5</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h2>Question 6</h2>
          <p>Your mind is always buzzing with unexplored ideas and plans</p>
          <select id="question6">
            <option selected disabled>Choose 1 - 5</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h2>Question 7</h2>
          <p>Your mind is always buzzing with unexplored ideas and plans</p>
          <select id="question7">
            <option selected disabled>Choose 1 - 5</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h2>Question 8</h2>
          <p>Your mind is always buzzing with unexplored ideas and plans</p>
          <select id="question8">
            <option selected disabled>Choose 1 - 5</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h2>Question 9</h2>
          <p>Your mind is always buzzing with unexplored ideas and plans</p>
          <select id="question9">
            <option selected disabled>Choose 1 - 5</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h2>Question 10</h2>
          <p>Your mind is always buzzing with unexplored ideas and plans</p>
          <select id="question10">
            <option selected disabled>Choose 1 - 5</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <div class="">
            <button id="submit" type="button" class="btn btn-primary">Submit</button>
          </div>

          <hr>

          <div class="littleLinks">
            <a href="/api/friends">API Friend List</a> |
            <a href="https://github.com/gatan45/FriendFinder">Github Repo</a>
          </div>

        </div>
      </div>
    </div>

    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close right" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>This is where a name would go</p>
            <img class="center" src="http://lorempixel.com/400/200" alt="">
          </div>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <script type="text/javascript">
      $("#submit").on("click", function(){
        var values = [];
        var name = $("#name").val().trim();
        var photo = $("#photo").val().trim();

        if(!name){ // check to see if the name is valid
          alert("You need to enter a name.");
          return;
        }
        if(!photo){ // check to see if the photo is valid
          alert("You need to enter a photo.");
          return;
        }
        for(var i = 1; i <= 10; i++){ // check to see if each questions is answered and build and array fo answers
          var question = "#question" + i + " option:selected";
          var value = parseInt($(question).val());
          if(value){
            values.push(value);
          }
          else{
            alert("You must answer all questions before submitting");
            return;
          }
        }

        var person = {
          name: name,
          photo: photo,
          scores: values
        }
        var currentURL = window.location.origin;

        $.post(currentURL + "/api/compute", person, function(response){
          console.log(response);
          $(".modal-body p").text(response.name);
          $(".modal-body img").attr("src", response.image);
          $("#exampleModal").modal();
        });

      });
    </script>
  </body>
</html>
